import{o as e,p as t,r as a}from"./index.6066ce25.js";import{b as s,o as l,d as o,e as d,f as i,t as n,F as m,g as r,w as u}from"./vendor.cd5cedf3.js";const h={props:{modelValue:{type:Boolean,default:""},datas:{type:Object,default:()=>({})}},emits:["update:modelValue","success"],data(){return{dialogVisible:this.modelValue,formData:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},roles:[],i18nTypes:[],i18ns:[]}},created(){this.getI18nTypes()},mounted(){},methods:{submitForm(){this.dialogVisible=!1,this.$emit("update:modelValue",!1)},onDialogClose(){this.$emit("update:modelValue",!1)},getI18nTypes(){e({size:200}).then((e=>{0===e.code&&(this.i18nTypes=e.data.list,this.getI18ns())}))},getI18ns(){t({size:200,search:{itemId:this.datas.id}}).then((e=>{0===e.code&&(this.i18ns=e.data.list,this.i18ns.map((e=>{this.i18nTypes.map((t=>{e.typeId==t.id&&(this.formData[t.code]=e.message)}))})))}))},getI18nByTM(e){return this.i18ns.find((t=>t.typeId==e&&t.itemId==this.datas.id))},handleI18nChange(e){const t=this.getI18nByTM(e.id);let s=t?t.id:"";a({id:s,typeId:e.id,itemId:this.datas.id,message:this.formData[e.code]}).then((e=>{0===e.code&&(this.$message.success("保存成功"),this.getI18ns())}))}},watch:{modelValue(e){this.dialogVisible=e}}},p=u(),c=p(((e,t,a,u,h,c)=>{const g=s("el-input"),f=s("el-form-item"),y=s("el-form"),V=s("el-button"),b=s("el-dialog");return l(),o(b,{title:e.$t("编辑")+`：${a.datas.name}`,modelValue:h.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>h.dialogVisible=e),"append-to-body":"",onClose:c.onDialogClose,"destroy-on-close":"","close-on-click-modal":!1,width:"40%"},{footer:p((()=>[d("div",null,[d(V,{type:"primary",onClick:t[1]||(t[1]=e=>c.submitForm("form"))},{default:p((()=>[i(n(e.$t("确定")),1)])),_:1})])])),default:p((()=>[d(y,{model:h.formData,ref:"form",rules:h.rules,"label-width":"120px","label-suffix":"："},{default:p((()=>[(l(!0),o(m,null,r(h.i18nTypes,((t,a)=>(l(),o(f,{key:a,label:e.$t(t.name),prop:"message"},{default:p((()=>[d(g,{modelValue:h.formData[t.code],"onUpdate:modelValue":e=>h.formData[t.code]=e,onChange:e=>c.handleI18nChange(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["label"])))),128))])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue","onClose"])}));h.render=c,h.__scopeId="data-v-10c2238e";export default h;
