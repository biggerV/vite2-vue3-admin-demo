import{m as e,b as a}from"./sys.1ef09c51.js";import{p as l,a as t,b as o,o as s,d,e as r,f as m,t as u,l as i,v as f,n,F as p,g as b,w as c}from"./vendor.cd5cedf3.js";import"./index.de78ff2b.js";const D={props:{isShow:{type:Boolean,default:!1},datas:{type:Object,default:()=>({})}},emits:["input","success"],data(){return{dialogVisible:this.isShow,formData:{},rules:{name:[{required:!0,message:"请输入账号",trigger:"blur"}]},roles:[]}},created(){this.getSysRoles()},methods:{submitForm(a){this.$refs[a].validate((a=>{if(!a)return!1;""!=this.formData.password&&null!=this.formData.password||delete this.formData.password,e(this.formData).then((e=>{0===e.code&&(this.$message.success("保存成功"),this.formData={},this.onDialogClose(),this.$emit("success",!0))}))}))},resetForm(e){this.$refs[e].resetFields()},onDialogClose(){this.$emit("input",!1)},getSysRoles(){a({size:100}).then((e=>{0===e.code&&(this.roles=e.data.list)})).catch((()=>{}))}},watch:{datas(e,a){e.id?(this.formData=e,this.rules.password=null):(this.formData={status:"1"},this.rules.password=[{required:!0,message:"请输入密码",trigger:"blur"}])}}},h=c();l("data-v-12cacfa8");const _={key:1};t();const V=h(((e,a,l,t,c,D)=>{const V=o("el-input"),g=o("el-form-item"),$=o("el-col"),y=o("Dictionary"),w=o("el-option"),U=o("el-select"),k=o("el-row"),v=o("el-form"),S=o("el-button"),C=o("el-dialog");return s(),d(C,{title:c.formData.id?e.$t("编辑"):e.$t("新增"),modelValue:c.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>c.dialogVisible=e),"append-to-body":"",onClose:D.onDialogClose,"destroy-on-close":""},{footer:h((()=>[r("div",null,[r(S,{type:"primary",onClick:a[9]||(a[9]=e=>D.submitForm("form"))},{default:h((()=>[m(u(e.$t("提交")),1)])),_:1}),r(S,{onClick:a[10]||(a[10]=e=>D.resetForm("form"))},{default:h((()=>[m(u(e.$t("重置")),1)])),_:1})])])),default:h((()=>[r(v,{model:c.formData,ref:"form",rules:c.rules,"label-width":"80px","label-position":"top","label-suffix":"："},{default:h((()=>[i(r(g,{prop:"id"},{default:h((()=>[r(V,{value:"formData.id"})])),_:1},512),[[f,!1]]),r(k,{gutter:20},{default:h((()=>[r($,{span:12},{default:h((()=>[r(g,{label:e.$t("账号"),prop:"name"},{default:h((()=>[c.formData.id?n("",!0):(s(),d(V,{key:0,modelValue:c.formData.name,"onUpdate:modelValue":a[1]||(a[1]=e=>c.formData.name=e)},null,8,["modelValue"])),!c.formData.id?n("",!0):(s(),d("span",_,u(c.formData.name),1))])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("密码"),prop:"password"},{default:h((()=>[r(V,{modelValue:c.formData.password,"onUpdate:modelValue":a[2]||(a[2]=e=>c.formData.password=e),placeholder:c.formData.id&&"不修改密码则不填写"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("用户名"),prop:"nickName"},{default:h((()=>[r(V,{modelValue:c.formData.nickName,"onUpdate:modelValue":a[3]||(a[3]=e=>c.formData.nickName=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("邮箱"),prop:"email"},{default:h((()=>[r(V,{modelValue:c.formData.email,"onUpdate:modelValue":a[4]||(a[4]=e=>c.formData.email=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("手机"),prop:"phone"},{default:h((()=>[r(V,{modelValue:c.formData.phone,"onUpdate:modelValue":a[5]||(a[5]=e=>c.formData.phone=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("性别"),prop:"gender"},{default:h((()=>[r(y,{modelValue:c.formData.gender,"onUpdate:modelValue":a[6]||(a[6]=e=>c.formData.gender=e),code:"GENDER",type:"radio"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("角色分配"),prop:"roleIds"},{default:h((()=>[r(U,{modelValue:c.formData.roleIds,"onUpdate:modelValue":a[7]||(a[7]=e=>c.formData.roleIds=e),clearable:"",multiple:"",disabled:c.formData.name==e.$config.admin},{default:h((()=>[(s(!0),d(p,null,b(c.roles,(e=>(s(),d(w,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("状态")},{default:h((()=>[r(y,{modelValue:c.formData.status,"onUpdate:modelValue":a[8]||(a[8]=e=>c.formData.status=e),code:"SYS_USER_STATUS",disabled:c.formData.name==e.$config.admin},null,8,["modelValue","disabled"])])),_:1},8,["label"])])),_:1}),c.formData.id?(s(),d(p,{key:0},[r($,{span:12},{default:h((()=>[r(g,{label:e.$t("创建时间")},{default:h((()=>[m(u(c.formData.createTime),1)])),_:1},8,["label"])])),_:1}),r($,{span:12},{default:h((()=>[r(g,{label:e.$t("更新时间")},{default:h((()=>[m(u(c.formData.updateTime),1)])),_:1},8,["label"])])),_:1})],64)):n("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue","onClose"])}));D.render=V,D.__scopeId="data-v-12cacfa8";export default D;
