import{k as e,l}from"./sys.1ef09c51.js";import{j as a}from"./index.de78ff2b.js";import t from"./AddUser.841a2136.js";import{b as o,Y as s,o as d,d as r,e as n,l as i,f as m,t as u,w as c}from"./vendor.cd5cedf3.js";const h={name:"Users",components:{AddUser:t},data:()=>({defaultAvatar:a,searchForm:{nickName:"",name:"",email:"",phone:"",status:""},isShowAddUser:!1,userFormData:{},getSysUsersAll:e}),mounted(){},methods:{handleShowAddUser(){this.userFormData={},this.isShowAddUser=!0},handleAddUserSuccess(){this.$refs.searchFormTable.getList(),this.isShowAddUser=!1},handleEdit(e){this.isShowAddUser=!0,this.userFormData=this.$tools.simDeepCopy(e)},async handleDel(e){try{if("confirm"==await this.$confirm(`确定要删除账号：${e.name} 吗？`,this.$t("提示"),{type:"warning"})){0===(await l(e)).code&&(this.$message.success("删除成功"),this.$refs.searchFormTable.getList())}}catch(a){}}},watch:{}},p=c(),b=p(((e,l,a,t,c,h)=>{const b=o("el-input"),f=o("el-form-item"),U=o("Dictionary"),$=o("el-button"),w=o("el-avatar"),S=o("el-table-column"),V=o("el-tag"),F=o("Dot"),_=o("SearchFormTable"),g=o("AddUser"),A=s("permit");return d(),r("div",null,[n(_,{searchFormModel:c.searchForm,getListServer:c.getSysUsersAll,ref:"searchFormTable"},{search:p((()=>[n(f,{prop:"nickName",label:e.$t("用户名")},{default:p((()=>[n(b,{modelValue:c.searchForm.nickName,"onUpdate:modelValue":l[1]||(l[1]=e=>c.searchForm.nickName=e)},null,8,["modelValue"])])),_:1},8,["label"]),n(f,{prop:"name",label:e.$t("账号")},{default:p((()=>[n(b,{modelValue:c.searchForm.name,"onUpdate:modelValue":l[2]||(l[2]=e=>c.searchForm.name=e)},null,8,["modelValue"])])),_:1},8,["label"]),n(f,{prop:"email",label:e.$t("邮箱")},{default:p((()=>[n(b,{modelValue:c.searchForm.email,"onUpdate:modelValue":l[3]||(l[3]=e=>c.searchForm.email=e)},null,8,["modelValue"])])),_:1},8,["label"]),n(f,{prop:"phone",label:e.$t("手机")},{default:p((()=>[n(b,{modelValue:c.searchForm.phone,"onUpdate:modelValue":l[4]||(l[4]=e=>c.searchForm.phone=e)},null,8,["modelValue"])])),_:1},8,["label"]),n(f,{prop:"status",label:e.$t("状态")},{default:p((()=>[n(U,{modelValue:c.searchForm.status,"onUpdate:modelValue":l[5]||(l[5]=e=>c.searchForm.status=e),code:"SYS_USER_STATUS",clearable:""},null,8,["modelValue"])])),_:1},8,["label"])])),operation:p((()=>[i(n($,{onClick:h.handleShowAddUser,icon:"el-icon-plus",size:"mini"},{default:p((()=>[m(u(e.$t("新增")),1)])),_:1},8,["onClick"]),[[A,"saveSysUser"]])])),columns:p((()=>[n(S,{label:e.$t("头像")},{default:p((l=>[n(w,{size:40,src:l.row.avatar?`${e.$config.fileRoot}/${l.row.avatar}`:`${e.$config.fileRoot}/avatar.jpg`},null,8,["src"])])),_:1},8,["label"]),n(S,{prop:"nickName",label:e.$t("用户名"),width:"120"},null,8,["label"]),n(S,{prop:"name",label:e.$t("账号")},null,8,["label"]),n(S,{prop:"email",label:e.$t("邮箱"),width:"180"},null,8,["label"]),n(S,{prop:"phone",label:e.$t("手机"),width:"150"},null,8,["label"]),n(S,{label:e.$t("性别"),width:"100"},{default:p((e=>[n(V,null,{default:p((()=>[n(U,{modelValue:e.row.gender,"onUpdate:modelValue":l=>e.row.gender=l,code:"GENDER",type:"text",index:e.$index},null,8,["modelValue","onUpdate:modelValue","index"])])),_:2},1024)])),_:1},8,["label"]),n(S,{prop:"status",label:e.$t("状态"),width:"100"},{default:p((e=>[n(F,{type:"warning"},{default:p((()=>[n(U,{modelValue:e.row.status,"onUpdate:modelValue":l=>e.row.status=l,code:"SYS_USER_STATUS",type:"text",index:e.$index},null,8,["modelValue","onUpdate:modelValue","index"])])),_:2},1024)])),_:1},8,["label"]),n(S,{prop:"createTime",label:e.$t("创建时间"),width:"180"},null,8,["label"]),n(S,{fixed:"right",label:e.$t("操作"),width:"100",align:"center"},{default:p((l=>[i(n($,{type:"text",onClick:e=>h.handleEdit(l.row)},{default:p((()=>[m(u(e.$t("编辑")),1)])),_:2},1032,["onClick"]),[[A,"saveSysUser"]]),i(n($,{type:"text",onClick:e=>h.handleDel(l.row),disabled:l.row.name==e.$config.admin},{default:p((()=>[m(u(e.$t("删除")),1)])),_:2},1032,["onClick","disabled"]),[[A,"delSysUser"]])])),_:1},8,["label"])])),_:1},8,["searchFormModel","getListServer"]),n(g,{modelValue:c.isShowAddUser,"onUpdate:modelValue":l[6]||(l[6]=e=>c.isShowAddUser=e),onSuccess:h.handleAddUserSuccess,datas:c.userFormData},null,8,["modelValue","onSuccess","datas"])])}));h.render=b,h.__scopeId="data-v-b84966fe";export default h;
